extends header

block content
  .w3-card-4 
    header.w3-container.main-color
      h1 Editar Inquirição
    .w3-container
        form.w3-container(action="/inquiry/"+i._id+"/edit" method="POST" enctype='multipart/form-data')
            fieldset
              legend Metadata
              label #[b Imagem de inquérito: ]
              if i.inquiryPicDir
                img(src=i.inquiryPicDir alt='Inquiry Picture')
                br
              input.w3-input(type="file" name="inquiryPic" accept="image/*")
              br
              label #[b Id da Inquirição: ] #{i.UnitId}
              br
              label #[b Titular: ] #{i.UnitTitle}
              br

              label #[b Filiações: ]
              .w3-container(id='affiliationsContainer')
                - let count = 0
                each affiliation in i.filiations
                  .w3-container
                    affiliation(id='affiliation'+count)
                      label #[b Nome] : 
                        input.w3-input(type="text" name="affiliationName" value=affiliation)
                      button.w3-btn.w3-blue(type="button" id="removeAffiliationBtn" onclick="removeElement('affiliation"+count+"')") -
                  - count+=1
                button.w3-btn.w3-blue(type="button" id="addAffiliationBtn" onclick="addAffiliationForm()") +

              label #[b Data de nascimento: ]
              input.w3-input(type="date" name="birthdate" max=today value=i.birthdate)
              br
              label #[b Local de nascimento: ]
              input.w3-input(type="text" name="birthplace" value=i.birthplace)
              br
              label #[b Concelho de residência: ]
              input.w3-input(type="text" name="current_concelho" value=i.current_concelho)
              br
              label #[b Distrito de residência: ]
              input.w3-input(type="text" name="current_district" value=i.current_district)
              br
              label #[b Laços Pessoais: ]
              .w3-container(id='relationsContainer')
                - count = 0
                each relation in i.relations_id
                  .w3-container
                    relation(id='relation'+count)
                      label #[b Nome] : 
                        input.w3-input(type="text" name="relationName" value=relation.name)
                      br
                      label #[b Relação] :
                        input.w3-input(type="text" name="relationType" value=relation.type)
                      br
                      label #[b ID do Processo] :
                        input.w3-input(type="number" name="relationId" value=relation.id)
                      br
                      button.w3-btn.w3-blue(type="button" id="removeRelationBtn" onclick="removeElement('relation"+count+"')") -
                  - count+=1
                button.w3-btn.w3-blue(type="button" id="addRelationBtn" onclick="addRelationForm()") +

              label #[b Localização física: ]
              input.w3-input(type="text" name="PhysLoc" value=i.PhysLoc)
              br
              label #[b Localização anterior: ]
              input.w3-input(type="text" name="PreviousLoc" value=i.PreviousLoc)
              br
              label #[b Material relacionado: ]
              input.w3-input(type="text" name="RelatedMaterial" value=i.RelatedMaterial)
              br

              br
              a.w3-btn.w3-blue(name="cancel" href='/inquiry/'+i._id) Cancelar
              input.w3-btn.w3-blue(type="submit" name="submit" value="Submeter modificações") 
              br

    footer.w3-indigo 
      address Generated by auth:RPCW2023 #{d} | #[a(href="/") Voltar]
      