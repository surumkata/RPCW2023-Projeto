extends layout 

block content 
    .w3-card-4 
        header.w3-indigo
            h1 Registo 


        form.w3-container(action="/users/register" method="POST")
            fieldset 
                legend Introduza as credenciais de autenticação 
                label Username 
                input.w3-input(type="text" name="username" required)
                if error
                    p Nome de usuário não disponível
                label Password 
                input.w3-input(id='password' type="password" oninput="validatePassword()" name="password" required)
                label Confirme Password 
                input.w3-input(id='confirmPassword' type="password" name="confirmPassword" oninput="validatePassword()" required)
                p(id='passwordWarning',style="display: none;") Passwords não correspondem
            input.w3-btn.w3-blue(id='submit' type="submit" value="Register")
        footer.w3-indigo 
            address Generated by auth:RPCW2023 #{d} | #[a(href="/") Voltar]

    script(type='text/javascript').
            function validatePassword(elem){
                var password = document.getElementById('password').value
                var confirmPassword = document.getElementById('confirmPassword').value
                var passwordWarning = document.getElementById('passwordWarning')
                var submitBtn = document.getElementById('submit')
                if(password && confirmPassword){
                    if(password != confirmPassword){
                        passwordWarning.style.display = 'block'
                        submitBtn.disabled = true
                    }
                    else{
                        passwordWarning.style.display = 'none'
                        submitBtn.disabled = false
                    }
                }
            }

        
