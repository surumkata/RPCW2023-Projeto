extends layout 

block content 
    .w3-container
        .w3-card-4(style="width:40%; margin:auto")
            .main-color.w3-center
                h1 Formulário de registo

            form.w3-container(action="/users/register" method="POST")
                w3.section
                    label #[b Email]
                    input.w3-input.w3-border.w3-hover-border-black.w3-margin-bottom(type="email" name="email" required)

                    label #[b Username]
                    input.w3-input.w3-border.w3-hover-border-black.w3-margin-bottom(type="text" name="username" required)
                    
                    label #[b Password]
                    input.w3-input.w3-border.w3-hover-border-black.w3-margin-bottom(id='password' type="password" oninput="validatePassword()" name="password" required)
                    
                    label #[b Confirme Password]
                    input.w3-input.w3-border.w3-hover-border-black.w3-margin-bottom(id='confirmPassword' type="password" name="confirmPassword" oninput="validatePassword()" required)
                    
                input.w3-button.main-color.w3-section(id='submit' type="submit" value="Register" style="width:100%")
            .w3-container.w3-border-top.w3-padding-16.w3-light-grey
                span.w3-left.w3-padding.w3-hide-small(id='passwordWarning',style="display: none; color:red" ) #[b Passwords não correspondem]
                if error
                    span.w3-left.w3-padding.w3-hide-small(style="color:red") #[b Nome de usuário não disponível]
                span.w3-right.w3-padding.w3-hide-small Já estás registado? #[a(href="login") Sign in]
        
    footer.main-color
        address Generated by auth:RPCW2023 #{d} | #[a(href="/") Voltar]

    script(type='text/javascript').
            function validatePassword(elem){
                var password = document.getElementById('password').value
                var confirmPassword = document.getElementById('confirmPassword').value
                var passwordWarning = document.getElementById('passwordWarning')
                var submitBtn = document.getElementById('submit')
                if(password && confirmPassword){
                    if(password != confirmPassword){
                        passwordWarning.style.display = 'block'
                        submitBtn.disabled = true
                    }
                    else{
                        passwordWarning.style.display = 'none'
                        submitBtn.disabled = false
                    }
                }
            }

        
